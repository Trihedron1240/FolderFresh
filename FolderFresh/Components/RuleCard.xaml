<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="FolderFresh.Components.RuleCard"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FolderFresh.Components"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Border x:Name="CardBorder"
            Background="#252525"
            BorderBrush="#333333"
            BorderThickness="1"
            CornerRadius="10"
            Padding="14"
            PointerEntered="CardBorder_PointerEntered"
            PointerExited="CardBorder_PointerExited">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Row 1: Drag handle, Toggle, Name, Match count, Actions -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Drag Handle -->
                <Border Grid.Column="0"
                        x:Name="DragHandle"
                        Background="Transparent"
                        Padding="4,0"
                        Margin="0,0,12,0"
                        CanDrag="True"
                        DragStarting="DragHandle_DragStarting">
                    <TextBlock Text="&#xE76F;"
                               FontFamily="Segoe MDL2 Assets"
                               FontSize="16"
                               Foreground="#666666"
                               VerticalAlignment="Center"/>
                </Border>

                <!-- Toggle Switch -->
                <ToggleSwitch Grid.Column="1"
                              x:Name="EnabledToggle"
                              OnContent=""
                              OffContent=""
                              MinWidth="40"
                              Margin="0,0,12,0"
                              Toggled="EnabledToggle_Toggled"/>

                <!-- Rule Name -->
                <TextBlock Grid.Column="2"
                           x:Name="RuleNameText"
                           Text="Rule Name"
                           FontSize="15"
                           FontWeight="SemiBold"
                           Foreground="White"
                           VerticalAlignment="Center"
                           TextTrimming="CharacterEllipsis"
                           MaxLines="1"/>

                <!-- Match Count Badge -->
                <Border Grid.Column="3"
                        Background="#1A60CDFF"
                        CornerRadius="4"
                        Padding="8,2"
                        Margin="16,0"
                        VerticalAlignment="Center">
                    <TextBlock x:Name="MatchCountText"
                               Text="0 files"
                               FontSize="12"
                               Foreground="#666666"/>
                </Border>

                <!-- Edit Button -->
                <Button Grid.Column="4"
                        x:Name="EditButton"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="8"
                        Margin="0,0,4,0"
                        Click="EditButton_Click"
                        PointerEntered="ActionButton_PointerEntered"
                        PointerExited="ActionButton_PointerExited">
                    <TextBlock Text="&#xE70F;"
                               FontFamily="Segoe MDL2 Assets"
                               FontSize="14"
                               Foreground="#666666"
                               x:Name="EditIcon"/>
                </Button>

                <!-- Delete Button -->
                <Button Grid.Column="5"
                        x:Name="DeleteButton"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="8"
                        Click="DeleteButton_Click"
                        PointerEntered="DeleteButton_PointerEntered"
                        PointerExited="DeleteButton_PointerExited">
                    <TextBlock Text="&#xE74D;"
                               FontFamily="Segoe MDL2 Assets"
                               FontSize="14"
                               Foreground="#666666"
                               x:Name="DeleteIcon"/>
                </Button>
            </Grid>

            <!-- Row 2: Condition Summary -->
            <TextBlock Grid.Row="1"
                       x:Name="ConditionSummaryText"
                       Text="No conditions"
                       FontSize="13"
                       Foreground="#999999"
                       Margin="40,8,0,0"
                       TextTrimming="CharacterEllipsis"
                       MaxLines="1"/>

            <!-- Row 3: Action Summary -->
            <StackPanel Grid.Row="2"
                        Orientation="Horizontal"
                        Margin="40,4,0,0">
                <TextBlock Text="&#x2192;"
                           FontSize="13"
                           Foreground="#60CDFF"
                           Margin="0,0,6,0"/>
                <TextBlock x:Name="ActionSummaryText"
                           Text="No actions"
                           FontSize="13"
                           Foreground="#60CDFF"
                           TextTrimming="CharacterEllipsis"
                           MaxLines="1"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
